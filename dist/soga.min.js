!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n((e=e||self).Soga={})}(this,function(e){"use strict";function n(e){var n=[],o=[],t=[];return e.getAllResponseHeaders().replace(/^(.*?):[^\S\n]*([\s\S]*?)$/gm,function(e,r,a){return n.push(r=r.toLowerCase()),o.push(a),t.push([r,a]),e}),function(e,n,o,t){return function r(){return{ok:2==(e.status/100|0),statusText:e.statusText,status:e.status,url:e.responseURL,headers:{keys:function(){return n},values:function(){return o},entries:function(){return t}},text:function(){return e.responseText},json:function(){return JSON.parse(e.responseText)},blob:function(){return new Blob([e.response])},clone:r}}}(e,n,o,t)}var o=function(e,o){this.file=e,this.hooks=o;var t=this.xhr=new XMLHttpRequest;t.onloadstart=function(){o.onUploadStart&&o.onUploadStart()},t.onloadend=function(){o.onUploadEnd&&o.onUploadEnd()},t.onload=function(){if(o.onUploadSuccess){var e=n(t);o.onUploadSuccess(e())}},t.onerror=function(){o.onUploadFailure&&o.onUploadFailure()},t.onabort=function(){o.onUploadCancel&&o.onUploadCancel()},t.onprogress=function(n){if(o.onUploadProgress){var t=e.size,r=Math.min(t,n.loaded),a=t>0?r/t:0;o.onUploadProgress({uploaded:r,total:t,percent:a})}}};o.prototype.upload=function(e){var n=this.xhr,o=this.file;for(var t in e.header)n.setRequestHeader(name,e.header[t]);var r=new FormData;for(var a in e.data)r.append(a,e.data[a]);r.append(e.fileName,o),n.open("post",e.action,!0),n.send(r)},e.AjaxUploader=o,e.fetch=function(e,o){return void 0===o&&(o={}),new Promise(function(t,r){var a=new XMLHttpRequest;for(var s in a.open(o.method||"get",e,!0),a.onload=function(){var e=n(a);t(e())},a.onerror=r,a.withCredentials="include"===o.credentials,o.headers)a.setRequestHeader(s,o.headers[s]);a.send(o.body||null)})},Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=soga.min.js.map
