!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n((e=e||self).Soga={})}(this,function(e){"use strict";function n(e){var n=[],o=[],t=[];return e.getAllResponseHeaders().replace(/^(.*?):[^\S\n]*([\s\S]*?)$/gm,function(e,r,s){return n.push(r=r.toLowerCase()),o.push(s),t.push([r,s]),e}),function(e,n,o,t){return function r(){return{ok:2==(e.status/100|0),statusText:e.statusText,status:e.status,url:e.responseURL,headers:{keys:function(){return n},values:function(){return o},entries:function(){return t}},text:function(){return Promise.resolve(e.responseText)},json:function(){return Promise.resolve(JSON.parse(e.responseText))},blob:function(){return Promise.resolve(new Blob([e.response]))},clone:r}}}(e,n,o,t)}var o=function(e,o){var t=this;this.file=e,this.hooks=o;var r=this.xhr=new XMLHttpRequest;r.onloadstart=function(){o.onUploadStart&&o.onUploadStart(t)},r.onloadend=function(){o.onUploadEnd&&o.onUploadEnd(t)},r.onload=function(){if(o.onUploadSuccess){var e=n(r);o.onUploadSuccess(t,e())}},r.onerror=function(){o.onUploadFailure&&o.onUploadFailure(t)},r.onabort=function(){o.onUploadCancel&&o.onUploadCancel(t)},r.onprogress=function(n){if(o.onUploadProgress){var r=e.size,s=Math.min(r,n.loaded),a=r>0?s/r:0;o.onUploadProgress(t,{uploaded:s,total:r,percent:a})}}};o.prototype.upload=function(e){var n=this.xhr,o=this.file;for(var t in e.header)n.setRequestHeader(name,e.header[t]);var r=new FormData;for(var s in e.data)r.append(s,e.data[s]);r.append(e.fileName,o),n.open("post",e.action,!0),n.send(r)},e.AjaxUploader=o,e.fetch=function(e,o){return void 0===o&&(o={}),new Promise(function(t,r){var s=new XMLHttpRequest;for(var a in s.open(o.method||"get",e,!0),s.onload=function(){var e=n(s);t(e())},s.onerror=r,s.withCredentials="include"===o.credentials,o.headers)s.setRequestHeader(a,o.headers[a]);s.send(o.body||null)})},Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=soga.min.js.map
